<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
      </link>
        
        <title>JSF TASK</title>
          <h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
    
    </h:head>
    <h:body class="bg-light">
       <div class="container bg-light mt-2">
                
                 <h:form class="bg-white mx-5  ">
                     <div style="background-color: goldenrod;">
                        <h4 class="text-white text-center py-2">Add Student</h4> 
                          </div> 
                     <div class="row pl-4 pt-3">
                             <div class="col-5">
                       
                        <div class="form-group">
                          <h:outputLabel  for="txtFirstName" styleClass="control-label">
                                     <h:outputText value="First Name:*"/>
                          </h:outputLabel>
                         <h:inputText id="txtFirstName" value="#{obj.firstName}" required="true" requiredMessage="First name is required." styleClass="form-control" />
                        </div>
              
                        <div class="form-group">
                            <h:outputLabel for="txtMiddleName" styleClass="control-label">
                             <h:outputText value="Middle Name:"/>
                            </h:outputLabel>
                           <h:inputText id="txtMiddleName" value="#{obj.middleName}" styleClass="form-control"/>
                         </div>
             
                         <div class="form-group">
                           <h:outputLabel  for="txtLastName" styleClass="control-label">
                            <h:outputText value="Last Name*:"/>
                           </h:outputLabel>
                           <h:inputText id="txtLastName" value="#{obj.lastName}" required="true" requiredMessage="Last name is required." styleClass="form-control"/>
                      </div>
              
               </div>
                 
               <div class="col-5 ml-5">
         
                        <div class="form-group">
                                <h:outputLabel for="txtFaculty" styleClass="control-label">
                                <h:outputText value="Faculty*:"/>
                                 <h:selectOneMenu id="txtFaculty" value="#{obj.faculty}" required="true" requiredMessage="Please select a faculty" styleClass="form-control" style="margin-top: 5px;" >
                                 <f:selectItem itemLabel="Select Faculty" itemValue=""  noSelectionOption="true" />
                                 <f:selectItems value="#{obj.facultyList}"  />                   
                                <f:ajax  execute="txtFaculty" listener="#{obj.onFacultyChange}" render="txtProgram" event="valueChange" />
                                 </h:selectOneMenu>
                                </h:outputLabel>
                        </div>
           
                        <div class="form-group" >
                                <h:outputLabel  for="txtProgram" styleClass="control-label">
                                    <h:outputText value="Program*:" />
                            
                                <h:selectOneMenu id="txtProgram" value="#{obj.program}" required="true" requiredMessage="Please select a program" styleClass="form-control" style="margin-top: 5px;">
                                <f:selectItem itemLabel="Select Program" itemValue="" noSelectionOption="true"/>
                                 <f:selectItems value="#{obj.programList}" />
                                 </h:selectOneMenu>    
                                  </h:outputLabel>
                           
                         </div>  
                   
                </div>
           </div>
                     <h:commandButton class="ml-4 mb-3" id="cmdSave" value="Submit" action="#{obj.save()}"/>
             
       
        
      <div style="background-color: goldenrod;">
          
                 <h4 class="text-white text-center py-2">Student List</h4> 
             </div>  
           <div class="mx-5">
           <h:dataTable value="#{obj.studentList}" var="student" styleClass="table" headerClass="table-header" footerClass="table-footer" rowClasses="table-odd-row, table-even-row">
               
               <h:column>
                   <f:facet name="header">First Name</f:facet>
                   #{student.firstName}
               </h:column>
               
               <h:column>
                   <f:facet name="header">Middle Name</f:facet>
                    #{student.middleName}
               </h:column>
               
               <h:column>
                   <f:facet name="header">Last Name</f:facet>
                    #{student.lastName}
               </h:column>
               
               <h:column>
                   <f:facet name="header">Faculty</f:facet>
                    #{student.faculty}
               </h:column>
               
               <h:column>
                   <f:facet name="header">Program</f:facet>
                    #{student.program}
               </h:column>
               <h:column>
                   <f:facet name="header">Action</f:facet>
                    <h:commandButton class="mr-2" id="cmdEdit" value="Edit" action="#{obj.update(student)}"/>
                    <h:commandButton  id="cmdDelete" value="Delete" action="#{obj.delete(student)}" />
               </h:column>
                
           </h:dataTable>
        </div>
        
<!--        <script type="text/javascript">
            
            fuction mytask(data) {
                alert(data);
                 var req = new XMLHttpRequest();
                  req.open(GET,"http://localhost:8080/MyTask/faces/student.java?datavalue="+data, true);
                  req.send();
                  
                  req.onreadystatechange = function() {
                      if(readyState==4 && req.status==200) {
                          document.getElementById('txtProgram').innerHTML = req.responseText;
                      }
                  }
            
            
            }          
            
        </script>-->
    </h:form>
      
     </div>         
    </h:body>
</html>



